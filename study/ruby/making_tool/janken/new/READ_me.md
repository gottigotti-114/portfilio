# じゃんけん勝負にダメージ機能を入れてみた！

## 前回との違い

  前回は一つのプログラムに全て記述していたり、コメントが少なかったりして再コーディングがしにくい、デバッグがしにくい点がありました。他にもじゃんけんなのに、じゃんけんをしていないことや本来のじゃんけんのルールが一つも備わっていないプログラムができてしまっていました。情報の友達がファイル分けをしてプログラムを見やすくする工夫をしていたので、今回はじゃんけんツールをさらに改良してバージョンアップしたプログラムを作りました。

## 設計で工夫した点
- ### ハッシュ配列で管理

  魔法技クラスのステータス、技名、与えるバフの数値などをクラス変数で管理するのではなく、ハッシュ配列で管理し、main側で定義したハッシュ配列でいつでも新しい魔法技を追加できるようになっています。

- ### sleepメソッドの活用

  ターミナルでの表示なので、バトルのターン制があまり肌身に感じにくいので、sleepメソッドを使って出力することで見やすくするように工夫しました

- ### 乱数の粒度を極度に上げる

  乱数生成でsrandを使い、現在時刻を取得することはよくあることだが、欠点としてプログラムを一度実行したら何度現在時刻を取得してもプログラム実行時の時間しか取得できないので外部で乱数生成(make_seed.rb)をし、その値をテキストデータで共有することで限りなく乱数の重複を防ぐことができます

- ### じゃんけんのパターンをインスタンス化し、配列に格納する

  今回のプログラムでは、じゃんけんのパターンをじゃんけんコード(1,2,3)に変換したりして見分けることができる。そしてじゃんけんのパターン(グー、チョキ、パー、与えるダメージなど)をインスタンス化し、配列に格納する。そしてじゃんけんコードは配列の添え字にもなる仕組みにしたので、配列名[じゃんけんコード]でじゃんけんの詳細を指定することができる



## じゃんけんのルール
- グー、チョキ、パーにそれぞれ攻撃ダメージ、ディフェンスアップを取り入れました。
- もしチョキVSパーでチョキが勝利だった時、ダメージ数を二倍にするクリティカル効果があります。あいこだった場合、それぞれ攻撃を受けますが、クリティカル効果はありません。
- ステータス一覧としては
  - HP(ヒットポイント：体力)
  - MP(マジックポイント：魔力)
  - DP(ディフェンスポイント：守備力)
  - ATK(アタック：攻撃力)
  - DEF(ディフェンス：防御力)
- 相手(bot)VS自分で対戦をします。
- 先にHPが削れ０になった方の負けです。
- 最初に被攻撃を食らったら、DP(守備力ゲージ)が減り、DPが0になったら、次にHP(体力ゲージ)が減ります。
- 今回はバトルに魔法技を取り入れることができます。魔法技は相手の攻撃力、守備力を下げたり、自分の攻撃力を上げることができます。
- 魔法攻撃はMPを消費し、MPはゲージではなく、それぞれの技のストック数とします。※魔法技の連投で攻撃力や防御力を下げすぎた場合、ダメージオーバーしてしまうためです。
- それぞれメソッドごとにメニューを表示する機能を追加します。

## メソッド・ファイルの役割
### mainファイル

  主にターン別に相手、自分の処理をします
<hr>

### jankenファイル

  主に、じゃんけんの勝敗とダメージ別を決めます
<hr>

### playerファイル

  主にプレイヤーのステータス管理、botのステータス管理をします
<hr>

### magicメソッド

  主に、魔法攻撃のストック、バフ数値の管理、処理をします
<hr>

### eventファイル

  勝敗が決まった際に、ダメージクリティカルや、攻撃力と技ダメージと攻撃力バフを計算するメソッドが必要になるので、作成するフレキシブルなメソッドや処理
<hr>

### make_seedファイル
乱数の生成ごとの数値の粒度を高めるための手助けをするファイル

特徴：システムの途中で
```ruby
system("ruby make_seed.rb")
```
と動作させることによって、seed_file.txtが作成される。
なので、システムの途中でもTime.nowの時間更新を受け取ることができ、それをシード値として反映できる。

## 起動の仕方
### ターミナルでmain.rbファイルがあるパスまで行き
```bash
ruby main.rb
```
### を実行する。
## 前提条件
- ### rubyのエンジンをインストールしていること
- ### 上記のファイルが全て存在すること

## これからについて
 ### これからは、時間があれば、turn.rbファイルを追加して、ターンごとにイベントを処理、そして入力時の入力ミスを防ぐための工夫や、実際にGUI画面に出力できるようにしたいと思っています。
